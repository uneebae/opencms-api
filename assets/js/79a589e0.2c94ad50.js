"use strict";(globalThis.webpackChunkopen_cms_paysyslabs=globalThis.webpackChunkopen_cms_paysyslabs||[]).push([[927],{4445(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"developerWorkflow","title":"Developer Workflow","description":"Integrate with OpenCMS API for card lifecycle management, authentication, inquiries, limits, and preferences.","source":"@site/docs/developerWorkflow.md","sourceDirName":".","slug":"/developerWorkflow","permalink":"/opencms-api/developerWorkflow","draft":false,"unlisted":false,"editUrl":"https://github.com/uneebae/opencms-api/tree/main/docs/developerWorkflow.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/opencms-api/introduction"},"next":{"title":"Data Type References","permalink":"/opencms-api/dataTypeRef"}}');var t=r(4848),d=r(8453);const a={},i="Developer Workflow",c={},l=[{value:"1 Authentication",id:"1-authentication",level:2},{value:"2 Card Lifecycle (Create \u2192 Activate)",id:"2-card-lifecycle-create--activate",level:2},{value:"A. Create Card",id:"a-create-card",level:3},{value:"B. Activate Card / Generate PIN",id:"b-activate-card--generate-pin",level:3},{value:"4 Card Limits",id:"4-card-limits",level:2},{value:"Update Rules",id:"update-rules",level:3},{value:"Workflow Summary",id:"workflow-summary",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"developer-workflow",children:"Developer Workflow"})}),"\n",(0,t.jsx)(n.p,{children:"Integrate with OpenCMS API for card lifecycle management, authentication, inquiries, limits, and preferences."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"1-authentication",children:"1 Authentication"}),"\n",(0,t.jsx)(n.p,{children:"Obtain a JWT token to authorize all API requests."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Endpoint:"})," ",(0,t.jsx)(n.code,{children:"POST /api/v1/authenticate"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "username": "partner_user",\n  "password": "s3cr3t#Key"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\n  "expiry": "1737620181064"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Header for all requests:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"X-Auth-Token: eyJhbGciOiJI...\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"2-card-lifecycle-create--activate",children:"2 Card Lifecycle (Create \u2192 Activate)"}),"\n",(0,t.jsx)(n.h3,{id:"a-create-card",children:"A. Create Card"}),"\n",(0,t.jsxs)(n.p,{children:["Issue a physical or virtual card using ",(0,t.jsx)(n.code,{children:"/api/v1/Card/create"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "idValue": "4220142163583",\n  "idType": "CNIC",\n  "productCode": "DEBIT001",\n  "embossName": "MEGAN ROSS",\n  "virtual": true,\n  "idempotencyKey": "f0d32e10-91d7-4029-8ad3-1a70b8c93d7a",\n  "rrn": "21212121232"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"b-activate-card--generate-pin",children:"B. Activate Card / Generate PIN"}),"\n",(0,t.jsxs)(n.p,{children:["Activate the card using ",(0,t.jsx)(n.code,{children:"/activateCard"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "idType": "CNIC",\n  "idValue": "4220142163583",\n  "format": "01",\n  "pin": "BASE64ENC_PIN",\n  "rrn": "21212121232",\n  "transactionDate": "2025-01-21T05:06:14.875Z"\n}\n```---\n\n## 3 Card Inquiry\n\nRetrieve all cards linked to a customer using `/getCardsByCustomer`.\n\n**Endpoint:** `GET /getCardsByCustomer/{idValue}/{rrn}`\n\n**Response:**\n```json\n{\n  "responseCode": "00",\n  "responseDescription": "OK",\n  "data": {\n    "cardList": [\n      {\n        "cardId": 202,\n        "cardNumber": "22058*****000269",\n        "cardStatus": "Fresh",\n        "productName": "PayPak Pink Cards"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"4-card-limits",children:"4 Card Limits"}),"\n",(0,t.jsxs)(n.p,{children:["Set or update card transaction limits using ",(0,t.jsx)(n.code,{children:"/setCustomerCardLimits"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "idType": "CNIC",\n  "idValue": "4220142163583",\n  "dailyLimit": 50000,\n  "perTxnLimit": 20000,\n  "channel": "ECOM",\n  "rrn": "21212121232"\n}\n```---\n\n## 5 Block Rules\n\n### Get Rules\n\nRetrieve card block rules using `/getCardBlockRules`.\n\n**Request:**\n```json\n{\n  "cardId": 3,\n  "type": "ALL",\n  "rrn": "21212121232"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"update-rules",children:"Update Rules"}),"\n",(0,t.jsxs)(n.p,{children:["Update card block rules using ",(0,t.jsx)(n.code,{children:"/updateCardBlockRules"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Request:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "cardId": 3,\n  "countryCodes": [{ "countryAlpha3Code": "ARG", "status": "ACTIVE" }],\n  "mcc": [{ "code": "4111", "status": "ACTIVE" }],\n  "rrn": "21212121232"\n}\n```---\n\n## 6 Channel Preferences\n\n### Get Preferences\n\nRetrieve customer channel preferences using `/getCustomerChannelPreferences`.\n\n**Endpoint:** `GET /getCustomerChannelPreferences/{idValue}/{rrn}`\n\n### Update Preferences\n\nUpdate customer channel preferences using `/updateCustomerChannelPreferences`.\n\n**Request:**\n```json\n{\n  "idType": "CNIC",\n  "idValue": "4220142163583",\n  "preferences": [\n    { "channelCode": "ECOM", "enabled": true }\n  ],\n  "rrn": "21212121232"\n}\n```---\n\n## 7 Card Status\n\nBlock or re-activate a card using `/setCardStatus`.\n\n**Request:**\n```json\n{\n  "cardId": 12345,\n  "status": "BLOCKED",\n  "reason": "Customer request",\n  "rrn": "21212121232"\n}\n```---\n\n## 8 Error Handling\n\nAll API failures return a standard error structure.\n\n**Error Response:**\n```json\n{\n  "responseCode": "99",\n  "responseDescription": "Invalid parameter or card not found"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Refer to the Response Codes section for complete error mappings."}),"\n",(0,t.jsx)(n.h2,{id:"workflow-summary",children:"Workflow Summary"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Step"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"Obtain token"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/api/v1/authenticate"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"2"}),(0,t.jsx)(n.td,{children:"Create/activate card"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"/api/v1/Card/create"}),", ",(0,t.jsx)(n.code,{children:"/activateCard"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"3"}),(0,t.jsx)(n.td,{children:"Fetch details"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"/getCardsByCustomer"}),", ",(0,t.jsx)(n.code,{children:"/getCardDetails"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"4"}),(0,t.jsx)(n.td,{children:"Configure limits"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/setCustomerCardLimits"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"5"}),(0,t.jsx)(n.td,{children:"Apply restrictions"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/updateCardBlockRules"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"6"}),(0,t.jsx)(n.td,{children:"Manage preferences"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/updateCustomerChannelPreferences"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"7"}),(0,t.jsx)(n.td,{children:"Manage status"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/setCardStatus"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"8"}),(0,t.jsx)(n.td,{children:"Handle errors"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"responseCode + responseDescription"})})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>i});var s=r(6540);const t={},d=s.createContext(t);function a(e){const n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);